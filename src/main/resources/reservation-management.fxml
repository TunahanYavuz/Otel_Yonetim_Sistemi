<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>

<AnchorPane prefHeight="800.0" prefWidth="1200.0" styleClass="main-container" stylesheets="@style.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="ymt_odev.Controllers.ReservationsController">

    <BorderPane AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">

        <!-- Ãœst Bar -->
        <top>
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="top-menu-bar">
                <padding>
                    <Insets bottom="15" left="30" right="30" top="15" />
                </padding>

                <Button onAction="#switchToMain" styleClass="secondary-button" text="ðŸ  Ana Sayfa" />
                <Text styleClass="app-title" text="ðŸ“‹ Rezervasyon YÃ¶netimi" />

                <Region HBox.hgrow="ALWAYS" />

                <Button onAction="#showNewReservation" styleClass="primary-button" text="âž• Yeni Rezervasyon" />
                <Button onAction="#handleLogout" styleClass="logout-button" text="ðŸšª Ã‡Ä±kÄ±ÅŸ" />
            </HBox>
        </top>

        <!-- Ana Ä°Ã§erik - ScrollPane ile sarÄ±lmÄ±ÅŸ -->
        <center>
            <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                <VBox spacing="20">
                    <padding>
                        <Insets bottom="20" left="30" right="30" top="20" />
                    </padding>

                    <!-- Filtre Paneli -->
                    <HBox alignment="CENTER_LEFT" spacing="20" styleClass="form-container">
                        <padding>
                            <Insets bottom="15" left="25" right="25" top="15" />
                        </padding>

                        <Text styleClass="info-text" text="ðŸ” Filtrele:" />

                        <ComboBox fx:id="reservationStatusFilter" prefWidth="140" value="TÃ¼m Durumlar" />

                        <DatePicker fx:id="filterStartDate" promptText="BaÅŸlangÄ±Ã§ Tarihi" />
                        <DatePicker fx:id="filterEndDate" promptText="BitiÅŸ Tarihi" />

                        <TextField fx:id="customerSearchField" prefWidth="150" promptText="MÃ¼ÅŸteri Ara..." />

                        <Button onAction="#filterReservations" styleClass="action-button" text="ðŸ” Filtrele" />
                        <Button onAction="#clearFilters" styleClass="secondary-button" text="ðŸ”„ Temizle" />
                    </HBox>

                    <!-- Rezervasyon Tablosu -->
                    <TableView fx:id="reservationsTable" prefHeight="350" styleClass="modern-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="reservationIdColumn" prefWidth="120" text="Rezervasyon No" />
                            <TableColumn fx:id="customerNameColumn" prefWidth="150" text="MÃ¼ÅŸteri" />
                            <TableColumn fx:id="roomNumberColumn" text="Oda" />
                            <TableColumn fx:id="checkInColumn" prefWidth="100" text="GiriÅŸ Tarihi" />
                            <TableColumn fx:id="checkOutColumn" prefWidth="100" text="Ã‡Ä±kÄ±ÅŸ Tarihi" />
                            <TableColumn fx:id="guestCountColumn" text="KiÅŸi SayÄ±sÄ±" />
                            <TableColumn fx:id="totalPriceColumn" prefWidth="100" text="Toplam Fiyat" />
                            <TableColumn fx:id="statusColumn" prefWidth="100" text="Durum" />
                            <TableColumn fx:id="actionsColumn" prefWidth="200" text="Ä°ÅŸlemler" />
                        </columns>
                    </TableView>

                    <!-- Alt Panel - SeÃ§ili Rezervasyon DetaylarÄ± -->
                    <VBox fx:id="reservationDetailsPanel" spacing="15" styleClass="form-container" visible="false">
                        <padding>
                            <Insets bottom="20" left="25" right="25" top="20" />
                        </padding>

                        <Text styleClass="section-title" text="ðŸ“‹ Rezervasyon DetaylarÄ±" />

                        <HBox spacing="40">
                            <!-- Sol Kolon -->
                            <VBox spacing="10">
                                <Text styleClass="info-text" text="Rezervasyon Bilgileri:" />
                                <Text fx:id="detailReservationId" text="-" />
                                <Text fx:id="detailCustomerName" text="-" />
                                <Text fx:id="detailRoomInfo" text="-" />
                                <Text fx:id="detailDates" text="-" />
                                <Text fx:id="detailGuestCount" text="-" />
                            </VBox>

                            <!-- Orta Kolon -->
                            <VBox spacing="10">
                                <Text styleClass="info-text" text="Ã–deme Bilgileri:" />
                                <Text fx:id="detailTotalPrice" text="-" />
                                <Text fx:id="detailDepositAmount" text="-" />
                                <Text fx:id="detailRemainingAmount" text="-" />
                                <Text fx:id="detailPaymentMethod" text="-" />
                                <Text fx:id="detailPaymentStatus" text="-" />
                            </VBox>

                            <!-- SaÄŸ Kolon - Ä°ÅŸlemler -->
                            <VBox alignment="TOP_RIGHT" spacing="10">
                                <Text styleClass="info-text" text="HÄ±zlÄ± Ä°ÅŸlemler:" />
                                <Button fx:id="checkInButton" onAction="#performCheckIn" prefWidth="140" styleClass="action-button" text="âœ… Check-in Yap" />
                                <Button fx:id="checkOutButton" onAction="#performCheckOut" prefWidth="140" styleClass="action-button" text="ðŸšª Check-out Yap" />
                                <Button fx:id="cancelButton" onAction="#cancelReservation" prefWidth="140" styleClass="secondary-button" text="âŒ Ä°ptal Et" />
                                <Button fx:id="editButton" onAction="#editReservation" prefWidth="140" styleClass="secondary-button" text="âœï¸ DÃ¼zenle" />
                            </VBox>
                        </HBox>

                        <!-- Ã–zel Ä°stekler ve Notlar -->
                        <VBox spacing="10">
                            <Text styleClass="info-text" text="ðŸ“ Ã–zel Ä°stekler ve Notlar:" />
                            <TextArea fx:id="specialRequestsArea" editable="false" prefRowCount="3" styleClass="modern-textfield" text="" />
                        </VBox>
                    </VBox>

                </VBox>
            </ScrollPane>
        </center>

        <!-- Alt Durum Bar -->
        <bottom>
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="status-bar">
                <padding>
                    <Insets bottom="10" left="30" right="30" top="10" />
                </padding>

                <Text fx:id="reservationCountText" styleClass="status-text" />
                <Separator orientation="VERTICAL" />
                <Text fx:id="selectedReservationText" styleClass="status-text" />

                <Region HBox.hgrow="ALWAYS" />

                <Button onAction="#generateReport" styleClass="secondary-button" text="ðŸ“Š Rapor Al" />
                <Button onAction="#exportReservations" styleClass="secondary-button" text="ðŸ“¤ DÄ±ÅŸa Aktar" />
            </HBox>
        </bottom>

    </BorderPane>
</AnchorPane>
